<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="Responsive Bootstrap 5 Admin &amp; Dashboard Template">
	<meta name="author" content="Bootlab">

	<title>Dashboard | Nuevo Post | Artpost</title>

	<link rel="canonical" href="dashboard-default.html">
	<link rel="shortcut icon" href="../asset/img/favicon.ico">

	<link href="../asset/css/css2.css?family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">

	<!-- Choose your prefered color scheme -->
	<link href="../asset/css/light.css" rel="stylesheet">
</head>
<!--
  HOW TO USE: 
  data-theme: default (default), dark, light
  data-layout: fluid (default), boxed
  data-sidebar-position: left (default), right
  data-sidebar-behavior: sticky (default), fixed, compact
-->

<body data-theme="default" data-layout="fluid" data-sidebar-position="left" data-sidebar-behavior="sticky">
	<div class="wrapper">
		<nav id="sidebar" class="sidebar">
			<div class="sidebar-content js-simplebar">
				<a class="sidebar-brand" href="">
			    	<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 142.08 29.43">
			    		<defs>
			    			<style>.cls-1{fill:#fff !important;}</style>
			    		</defs>
			    		<g id="Capa_2" data-name="Capa 2">
			    			<g id="Capa_1-2" data-name="Capa 1">
			    				<path class="cls-1" d="M21.76,29l-2.89-8H7.81L5,29H0L10.82,0H16L26.78,29ZM17.62,16.93,14.91,9.06c-.19-.53-.47-1.36-.82-2.49s-.59-2-.72-2.5A44.16,44.16,0,0,1,11.81,9.4L9.2,16.93Z"/><path class="cls-1" d="M56.93,25.68a11.24,11.24,0,0,0,3.41-.54v3.5a9.65,9.65,0,0,1-2,.57,13.82,13.82,0,0,1-2.52.22q-6.61,0-6.61-7V10.68H45.34V6.74h4.21V2.29h4.34V6.74h6.34v3.94H53.89V22.39a3.28,3.28,0,0,0,.84,2.48A3,3,0,0,0,56.93,25.68Z"/><path class="cls-1" d="M83.56,8.86a8.43,8.43,0,0,1-3,6.94q-3,2.41-8.45,2.42h-3V29H64.42V.12h8.32c3.62,0,6.32.74,8.12,2.21A8,8,0,0,1,83.56,8.86ZM69.14,14.24h2.52q3.63,0,5.34-1.26a4.64,4.64,0,0,0,1.7-4A4.49,4.49,0,0,0,77.17,5.3a7.47,7.47,0,0,0-4.74-1.23H69.14Z"/><path class="cls-1" d="M102.91,9.82a9.64,9.64,0,0,0-7.52-3.06,9.89,9.89,0,0,0-7.69,3Q85,12.74,85,18.06a13.56,13.56,0,0,0,1.26,6,9.15,9.15,0,0,0,3.62,4,10.53,10.53,0,0,0,5.42,1.38,9.88,9.88,0,0,0,7.66-3q2.75-3,2.75-8.37A11.83,11.83,0,0,0,102.91,9.82ZM95.35,25.64q-5.59,0-5.6-7.58a9.85,9.85,0,0,1,1.32-5.56,4.75,4.75,0,0,1,4.24-1.94q5.58,0,5.58,7.5T95.35,25.64Z"/><path class="cls-1" d="M124.48,22.81a5.73,5.73,0,0,1-2.33,4.91,11.21,11.21,0,0,1-6.69,1.71,15.86,15.86,0,0,1-7-1.32v-4a17.17,17.17,0,0,0,7.18,1.78q4.29,0,4.29-2.59a2.08,2.08,0,0,0-.47-1.38,5.73,5.73,0,0,0-1.57-1.15,27.17,27.17,0,0,0-3-1.35,14,14,0,0,1-5.12-2.92,5.42,5.42,0,0,1-1.33-3.8,5,5,0,0,1,2.26-4.36,10.72,10.72,0,0,1,6.16-1.56,17.45,17.45,0,0,1,7.3,1.57l-1.5,3.5a16.11,16.11,0,0,0-6-1.46c-2.46,0-3.68.69-3.68,2.09a2.1,2.1,0,0,0,1,1.74,20.66,20.66,0,0,0,4.18,2,19.21,19.21,0,0,1,3.94,1.92,5.84,5.84,0,0,1,1.82,2A5.87,5.87,0,0,1,124.48,22.81Z"/><path class="cls-1" d="M41.82,6.83c-.42,0-.89-.07-1.4-.07a6.77,6.77,0,0,0-3.77,1.15A8.62,8.62,0,0,0,33.81,11h-.24L33,7.16H29.32V29H34V17.6a7,7,0,0,1,1.73-4.72c1.87-2.19,3.52-2.2,6.12-2.2Z"/><path class="cls-1" d="M138.68,25.68a11.18,11.18,0,0,0,3.4-.54v3.5a9.47,9.47,0,0,1-2,.57,13.82,13.82,0,0,1-2.52.22q-6.6,0-6.61-7V10.68h-3.88V6.74h4.21V2.29h4.34V6.74H142v3.94h-6.34V22.39a3.28,3.28,0,0,0,.84,2.48A3.06,3.06,0,0,0,138.68,25.68Z"/>
			    			</g>
			    		</g>
			    	</svg>
		        </a>

				<ul class="sidebar-nav">
					<li class="sidebar-header">
						Páginas
					</li>
					<li class="sidebar-item active">
						<a href="/" class="sidebar-link">
			              <i class="align-middle" data-feather="sliders"></i> <span class="align-middle">Dashboard</span>
			            </a>
					</li>
					<li class="sidebar-item">
						<a href="#dashboards" data-toggle="collapse" class="sidebar-link">
              				<i class="align-middle" data-feather="sliders"></i> <span class="align-middle">Entradas</span>
            			</a>
						<ul id="dashboards" class="sidebar-dropdown list-unstyled collapse show" data-parent="#sidebar">
							<li class="sidebar-item"><a class="sidebar-link" href="entradas.php?post=buscar">Ver</a></li>
							<li class="sidebar-item"><a class="sidebar-link" href="entradas.php?post=insertar">Añadir</a></li>
							<li class="sidebar-item"><a class="sidebar-link" href="categoria.php?cat=buscar">Categorias</a></li>
							<li class="sidebar-item"><a class="sidebar-link" href="etiqueta.php?tag=buscar">Etiquetas</a></li>
						</ul>
					</li>
				</ul>
			</div>
		</nav>
		<div class="main">
			<nav class="navbar navbar-expand navbar-light navbar-bg">
				<a class="sidebar-toggle">
		          <i class="hamburger align-self-center"></i>
		        </a>
				<form class="d-none d-sm-inline-block">
					<div class="input-group input-group-navbar">
						<input type="text" class="form-control" placeholder="Buscar..." aria-label="Search">
						<div class="input-group-append">
							<button class="btn" type="button">
				                <i class="align-middle" data-feather="search"></i>
				            </button>
						</div>
					</div>
				</form>

				<div class="navbar-collapse collapse">
					<ul class="navbar-nav navbar-align">
						<li class="nav-item dropdown">
							<a class="nav-icon dropdown-toggle d-inline-block d-sm-none" href="#" data-toggle="dropdown">
				                <i class="align-middle" data-feather="settings"></i>
				            </a>

							<a class="nav-link dropdown-toggle d-none d-sm-inline-block" href="#" data-toggle="dropdown">
                				<img src="../asset/img/avatarwithmask.png" class="avatar img-fluid rounded-circle mr-1" alt="Chris Wood"> <span class="text-dark">Chris Wood</span>
              				</a>
							<div class="dropdown-menu dropdown-menu-right">
								<a class="dropdown-item" href="salir">Salir</a>
							</div>
						</li>
					</ul>
				</div>
			</nav>

			<main class="content">
				<div class="container-fluid p-0">

					<div class="row mb-2 mb-xl-3">
						<div class="col-auto d-none d-sm-block">
							<h3>Añadir entrada</h3>
						</div>						
					</div>
					<form id="newpost" method="post" enctype="multipart/form-data" action="entradas.php">
						<div class="row">
							<div class="col-12 col-md-8">
								<div class="card">
									<div class="card-body">
										<input type="hidden" name="post_type" value="post">
										<input type="hidden" name="status_post" value="publish" id="statuspost">
										<div class="form-group">
											<label class="form-label">Titulo</label>
											<input type="text" class="form-control" name="post_title" placeholder="Nombre del POST">
										</div>
										<div class="form-group">
											<input type="text" class="form-control" name="post_slug" readonly placeholder="URL POST">
										</div>
										<div class="form-group">
											<label class="form-label">Estracto(Bajada)</label>
											<textarea class="form-control" name="resumen_post"></textarea>
										</div>
										<div class="clearfix">
											<div id="quill-toolbar">
												<span class="ql-formats">
									            </span>
									            <span class="ql-formats">
									              <button class="ql-header" value="2"></button>
									              <button class="ql-blockquote"></button>
									            </span>
												<span class="ql-formats">
									              <button class="ql-bold"></button>
									              <button class="ql-italic"></button>
									              <button class="ql-underline"></button>
									              <button class="ql-strike"></button>
									            </span>
												<span class="ql-formats">
									            </span>
												<span class="ql-formats">
									              <button class="ql-script" value="sub"></button>
									              <button class="ql-script" value="super"></button>
									            </span>											
												<span class="ql-formats">
									              <button class="ql-list" value="ordered"></button>
									              <button class="ql-list" value="bullet"></button>
									              <button class="ql-indent" value="-1"></button>
									              <button class="ql-indent" value="+1"></button>
									            </span>
												<span class="ql-formats">
									            </span>
												<span class="ql-formats">
									              <button class="ql-link"></button>
									              <button class="ql-image"></button>
									              <button class="ql-video"></button>
									            </span>
												<span class="ql-formats">
									              <button class="ql-clean"></button>
									            </span>
											</div>
											<div id="quill-editor"></div>
											<textarea name="post_content" id="postcontent" class="d-none"></textarea>
										</div>
									</div>
								</div>							
							</div>
							<div class="col-12 col-md-4">
								<div class="card">
									<div class="card-body">
										<button type="submit" class="btn btn-primary" data-value="publish">Publicar</button>
										<button type="submit" class="btn btn-warning" data-value="eraser">Borrador</button>
									</div>
								</div>
								<div class="card">
									<div class="card-header">
										<h5 class="card-title mb-0">Categorias</h5>
									</div>
									<div class="card-body" id="liscat">
										<p>No hay categorias disponibles</p>
									</div>
								</div>
								<div class="card">
									<div class="card-header">
										<h5 class="card-title mb-0">Etiquetas</h5>
									</div>
									<div class="card-body">
										<div>
										<select class="form-control select2" name="tag[]" data-toggle="select2" multiple="" id="tags">
								        </select>
									</div>
									</div>
								</div>
								<div class="card">
									<div class="card-header">
										<h5 class="card-title mb-0">Imágen destacada</h5>
									</div>
									<div class="card-body">
										<div>
										<div class="form-group">
											<label class="form-label">Seleccione una(s) imagen(es)</label>
											<div>
												<input type="file" class="form-control" name="userfile">
											</div>
										</div>
									</div>
									</div>
								</div>
							</div>
						</div>
					</form>
				</div>
			</main>

			<footer class="footer">
				<div class="container-fluid">
					<div class="row text-muted">
						<div class="col-6 text-left">
							
						</div>
						<div class="col-6 text-right">
							<p class="mb-0">
								&copy; 2021 - <a href="/" class="text-muted">Arpost</a>
							</p>
						</div>
					</div>
				</div>
			</footer>
		</div>
	</div>
	<script src="../asset/js/app.js"></script>
	<script src="../asset/js/slug/slug.js"></script>
	<script>
		document.addEventListener("DOMContentLoaded", function() {
			if (!window.Quill) {
				return $("#quill-editor,#quill-toolbar").remove();
			}
			window.editor = new Quill("#quill-editor", {
				modules: {
					toolbar: "#quill-toolbar"
				},
				placeholder: "Escriba su contenido...",
				theme: "snow"
			});

			editor.on('text-change', function(delta, oldDelta, source){
				var r = $("#quill-editor").find('.ql-editor').html()
				$("#postcontent").val(encodeURIComponent(r))
			})
			$(".btn").click(function(event) {
				$("#statuspost").val($(this).data('value'))
			});
			$("#newpost").submit(function(event) {
				var r = $("#quill-editor").find('.ql-editor').html()
				$("#postcontent").val(encodeURIComponent(r))
			});
			$(".select2").each(function() {
					$(this)
						.wrap("<div class=\"position-relative\"></div>")
						.select2({
							placeholder: "Selecione un valor",
							dropdownParent: $(this).parent()
						});
				})
			$('input[name="post_title"]').keyup(function(event) {
				$('input[name="post_slug"]').val(slug($(this).val()))
			});

			$.get('categoria.php', {cat:'ajax2'}, function(data){
				let d = JSON.parse(data);
				if (d.data.length > 0) {
					let check = '';
					$.each(d.data, function(index, el) {
						console.log(el)
						check += `<label class="custom-control custom-checkbox">
					          <input type="checkbox" name="category[]" class="custom-control-input" value="${el[0]}">
					          <span class="custom-control-label">${el[1]}</span>
					        </label>
						`;
					});
					$("#liscat").html(check)
				}
			})
			$.get('etiqueta.php', {tag:'ajax2'}, function(data){
				let d = JSON.parse(data);
				if (d.data.length > 0) {
					$.each(d.data, function(index, el) {
						console.log(el)
						var opt = $(`<option value="${el[0]}">${el[1]}</option>`);
						opt.appendTo('#tags')
					});
				}
			})
		});
	</script>
</body>
</html>